# Basic ports configuration
listening-port=3478
tls-listening-port=5349
alt-listening-port=3479
alt-tls-listening-port=5350

# Relay ports range
min-port=49152
max-port=65535

# Logging
verbose
log-file=/var/log/coturn/turn.log
simple-log

# Security features
fingerprint
lt-cred-mech
stale-nonce=600

# Realm configuration
realm=${TURN_EXTERNAL_IP}

# Authentication
use-auth-secret
static-auth-secret=${TURN_SECRET}

# SSL/TLS Configuration - ОБЯЗАТЕЛЬНЫЕ НАСТРОЙКИ
cert=/etc/coturn/ssl/fullchain.pem
pkey=/etc/coturn/ssl/privkey.pem

# TLS settings
cipher-list="ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256"
dh-file=/etc/coturn/ssl/dhparam.pem  # опционально, но рекомендуется

# Security enhancements
no-tlsv1
no-tlsv1_1
no-cli

# Network settings
external-ip=${TURN_EXTERNAL_IP}
user-quota=12
total-quota=1200

# DTLS settings
dtls-passive-mode
no-multicast-peers

# Performance
proc-user=turnserver
proc-group=turnserver
